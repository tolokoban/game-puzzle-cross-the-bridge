(()=>{"use strict";var t,e,i,r={9892:(t,e,i)=>{i.d(e,{A:()=>E});var r=i(1601),s=i.n(r),n=i(6314),o=i.n(n),a=i(4417),h=i.n(a),c=new URL(i(1959),i.b),u=new URL(i(7566),i.b),l=new URL(i(2369),i.b),d=new URL(i(7544),i.b),f=new URL(i(9475),i.b),m=new URL(i(7050),i.b),g=o()(s()),p=h()(c),y=h()(u),b=h()(l),x=h()(d),w=h()(f),v=h()(m);g.push([t.id,`\n@font-face {\n  font-family: fuzzy-bubbles;\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${p}) format('woff2');\n  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;\n}\n\n@font-face {\n  font-family: fuzzy-bubbles;\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${y}) format('woff2');\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n}\n\n@font-face {\n  font-family: fuzzy-bubbles;\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${b}) format('woff2');\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n}\n\n@font-face {\n  font-family: fuzzy-bubbles;\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${x}) format('woff2');\n  unicode-range: U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1, U+01AF-01B0, U+1EA0-1EF9, U+20AB;\n}\n\n@font-face {\n  font-family: fuzzy-bubbles;\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${w}) format('woff2');\n  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;\n}\n\n@font-face {\n  font-family: fuzzy-bubbles;\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${v}) format('woff2');\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;\n}\n`,""]);const E=g},9165:(t,e,i)=>{i.d(e,{A:()=>a});var r=i(1601),s=i.n(r),n=i(6314),o=i.n(n)()(s());o.push([t.id,"html,\nbody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    font-size: 5vmin;\n    font-family: fuzzy-bubbles, sans-serif;\n    margin: 0;\n    padding: 0;\n    background-color: #def;\n}\n\n#tgd-logo.vanish {\n    opacity: 0;\n    transition: opacity 0.9s;\n}\n\nhr {\n    margin: 1.5rem 0;\n    display: block;\n    width: 100%;\n    height: 1px;\n    border: 0;\n    background-image: linear-gradient(\n        to right,\n        transparent,\n        currentColor,\n        currentColor,\n        transparent\n    );\n}\n\n*, *::after, *::before {\n    box-sizing: border-box;\n}\n\nbutton {\n    font: inherit;\n    border: inherit;\n    background-color: #f90;\n    font-variant: small-caps;\n    line-height: 2em;\n    padding: 0 1em;\n    font-weight: bold;\n    border-radius: .25em;\n    box-shadow: 0 .125em .125em #0007;\n}\n\n#progress-container.show {\n    position: absolute;\n    top: 2rem;\n    left: 0;\n    right: 0;\n    z-index: 99999;\n    text-align: center;\n}\n\n#progress-container.show > #progress {\n    width: 80%;\n    height: 1rem;\n}\n\n",""]);const a=o},9419:(t,e,i)=>{i.d(e,{Di:()=>h,bw:()=>s,ig:()=>o,s9:()=>l});var r=i(6540);const s={"/":["/"],"/play":["/play"]};function n(t,...e){var i;const r=function(t,e){const i=s[t];let r=0;return i.map((t=>"["===t.charAt(0)?e[r++]:t)).join("/")}(t,e);return r!==(null===(i=m().value)||void 0===i?void 0:i.path)&&(window.location.hash=r,!0)}function o(t,...e){return()=>{n(t,...e)}}function a(t){let e=null;for(const i of Object.values(s)){const r=h(t,i);if(r){if(0===r.distance)return r;(!e||r.distance<e.distance)&&(e=r)}}return e}function h(t,e){if(!e)return null;let i=t;const r={};for(let t=0;t<e.length;t++){if(i.length<1)return null;const s=e[t];if(s.startsWith("[")){const t=s.substring(1,s.length-1),[e,n]=c(i);r[t]=e,i=n}else{if(!i.startsWith(s))return null;i=i.substring(s.length+1)}}return{path:t,route:e.join("/"),params:r,distance:i.length}}function c(t){const e=t.indexOf("/");return e<0?[t,""]:[t.substring(0,e),t.substring(e+1)]}class u{constructor(t){this.security=t,this.listeners=new Set,this._value=null,this.handleHashChange=t=>{const e=this.extractHash(t.oldURL),i=this.extractHash(t.newURL),r=this.ensureAbsoluteHash(i,e);r!==i&&history.replaceState({},"",`#${r}`),this.setHash(r)},this.nonEmpty=t=>"string"==typeof t&&t.trim().length>0;const e=this.extractHash(window.location.href);this.setHash(e).then((()=>window.addEventListener("hashchange",this.handleHashChange))).catch((t=>{console.error(`Unable to set hash to "${e}":`,t)}))}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}get value(){return this._value}setHash(t){return e=this,i=void 0,s=function*(){var e;let i=a(t);if(i)for(const[e,r]of this.security){if(!i.route.startsWith(e))continue;const s=yield r(i.route,t);if(s&&s!==i.route){if(i=a(s),!i)break;return this._value=null,void n(i.path)}}(null===(e=this._value)||void 0===e?void 0:e.route)!==(null==i?void 0:i.route)&&(this._value=i,this.listeners.forEach((t=>t(i))))},new((r=void 0)||(r=Promise))((function(t,n){function o(t){try{h(s.next(t))}catch(t){n(t)}}function a(t){try{h(s.throw(t))}catch(t){n(t)}}function h(e){var i;e.done?t(e.value):(i=e.value,i instanceof r?i:new r((function(t){t(i)}))).then(o,a)}h((s=s.apply(e,i||[])).next())}));var e,i,r,s}extractHash(t){const e=new URL(t).hash;return e?e.startsWith("#")?e.substring(1):e:"/"}ensureAbsoluteHash(t,e){if(t.startsWith("/"))return t;let i=t;for(;i.startsWith("./");)i=i.substring(2);const r=e.split("/").filter(this.nonEmpty);for(const e of t.split("/"))".."===e?r.length>0&&r.pop():r.push(e);return`/${r.filter(this.nonEmpty).join("/")}`}}function l(){const[t,e]=r.useState(m().value);return r.useEffect((()=>{const t=t=>{e(t)};return m().addListener(t),()=>m().removeListener(t)}),[]),t}const d=[];let f=null;function m(){return f||(f=new u(d)),f}},2772:(t,e,i)=>{i.d(e,{A:()=>u,Z:()=>c});var r=i(6540),s=i(2984),n=function(t,e,i,r){return new(i||(i=Promise))((function(s,n){function o(t){try{h(r.next(t))}catch(t){n(t)}}function a(t){try{h(r.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))};function o(t){return n(this,void 0,void 0,(function*(){const e=yield s.M7.image(t);if(!e)throw Error(`Unable to load image "${t}"!`);return e}))}function a(t){return n(this,void 0,void 0,(function*(){const e=yield fetch(t);return yield e.arrayBuffer()}))}const h=new class{constructor(){this.lowRes=function(t){return new Promise(((e,i)=>{(()=>{n(this,void 0,void 0,(function*(){try{const[i,r,s,n,h,c,u]=yield Promise.all([o(t.background),o(t.bridgeTexture),a(t.bridgeMesh),o(t.riverTexture),a(t.riverMesh),o(t.worldTexture),a(t.worldMesh)]);e({background:i,bridgeTexture:r,bridgeMesh:s,riverTexture:n,riverMesh:h,worldTexture:c,worldMesh:u})}catch(t){i(t)}}))})()}))}({background:"./assets/background.2k.avif",bridgeTexture:"./assets/bridge.avif",bridgeMesh:"./assets/bridge.glb",riverTexture:"./assets/river.avif",riverMesh:"./assets/river.glb",worldTexture:"./assets/world.2k.avif",worldMesh:"./assets/world.glb"})}};function c(){const[t,e]=r.useState(null);return r.useEffect((()=>{h.lowRes.then(e).catch(console.error)}),[]),t}const u=h},7994:(t,e,i)=>{var r=i(4848),s=i(5338),n=i(8803),o=i(2772),a=i(6540),h=i(9419);const c=a.lazy((()=>i.e(582).then(i.bind(i,8582)))),u=a.lazy((()=>i.e(588).then(i.bind(i,6588))));function l({lang:t}){const e=(0,h.s9)(),i=(0,r.jsx)("div",{children:"Loading..."}),s=c,n=u;return(0,r.jsx)(d,{path:"/",Page:s,fallback:i,context:e,children:(0,r.jsx)(d,{path:"/play",Page:n,fallback:i,context:e})})}function d({path:t,fallback:e,children:i,Page:s,Layout:n,Template:o,context:c}){const u=c&&(0,h.Di)(c.path,h.bw[t]);if(!u)return null;if(0===u.distance){if(!s)return null;const t=o?(0,r.jsx)(o,{params:u.params,children:(0,r.jsx)(s,{params:u.params})}):(0,r.jsx)(s,{params:u.params});return n?(0,r.jsx)(n,{params:u.params,children:(0,r.jsx)(a.Suspense,{fallback:e,children:t})}):(0,r.jsx)(a.Suspense,{fallback:e,children:t})}return n?(0,r.jsx)(n,{params:u.params,children:i}):(0,r.jsx)(r.Fragment,{children:i})}var f=i(5072),m=i.n(f),g=i(7825),p=i.n(g),y=i(7659),b=i.n(y),x=i(5056),w=i.n(x),v=i(540),E=i.n(v),_=i(1113),A=i.n(_),T=i(9165),U={};U.styleTagTransform=A(),U.setAttributes=w(),U.insert=b().bind(null,"head"),U.domAPI=p(),U.insertStyleElement=E(),m()(T.A,U),T.A&&T.A.locals&&T.A.locals;var M=i(9892),P={};P.styleTagTransform=A(),P.setAttributes=w(),P.insert=b().bind(null,"head"),P.domAPI=p(),P.insertStyleElement=E(),m()(M.A,P),M.A&&M.A.locals&&M.A.locals;!function(){var t,e,i,a;t=this,e=void 0,a=function*(){new n.Sxu({colors:{neutral:["#111","#999"]}}).apply();const t=document.getElementById("app");if(!t)throw Error('No element with id "app"!');(0,s.H)(t).render((0,r.jsx)(l,{})),yield o.A.lowRes;const e=document.getElementById("splash-screen");if(!e)throw Error("Unable to find element #splash-screen!");e.classList.add("vanish"),window.setTimeout((()=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.removeChild(e)}),1e3)},new((i=void 0)||(i=Promise))((function(r,s){function n(t){try{h(a.next(t))}catch(t){s(t)}}function o(t){try{h(a.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,o)}h((a=a.apply(t,e||[])).next())}))}()},2984:(t,e,i)=>{function r(t,e=6){const i=Math.pow(10,e),r=[];let s=0;for(const n of t){const t=(Math.round(n*i)/i).toFixed(e);s=Math.max(s,t.length),r.push(t)}return r.map((t=>t.padStart(s," ")))}i.d(e,{xN:()=>p,tf:()=>k,I9:()=>V,M7:()=>R,MC:()=>a,tb:()=>$,b6:()=>O,o5:()=>W,AN:()=>Y,Ip:()=>J,FX:()=>ot,NI:()=>q,dL:()=>K,hN:()=>o,Lm:()=>L});class s extends Float32Array{constructor(t=1,e=0,i=0,r=0,s=1,n=0,o=0,a=0,h=1){super("number"==typeof t?[t,e,i,r,s,n,o,a,h]:t)}transpose(){let t=this.m10;return this.m10=this.m01,this.m01=t,t=this.m20,this.m20=this.m02,this.m02=t,t=this.m21,this.m21=this.m12,this.m12=t,this}fromQuat({x:t,y:e,z:i,w:r}){const s=t+t,n=e+e,o=i+i,a=t*s,h=e*s,c=e*n,u=i*s,l=i*n,d=i*o,f=r*s,m=r*n,g=r*o;return this.m00=1-c-d,this.m10=h-g,this.m20=u+m,this.m01=h+g,this.m11=1-a-d,this.m21=l-f,this.m02=u-m,this.m12=l+f,this.m22=1-a-c,this}toAxis(t,e,i){return this.toAxisX(t),this.toAxisY(e),this.toAxisZ(i)}toAxisX(t){return t.x=this.m00,t.y=this.m01,t.z=this.m02,this}toAxisY(t){return t.x=this.m10,t.y=this.m11,t.z=this.m12,this}toAxisZ(t){return t.x=this.m20,t.y=this.m21,t.z=this.m22,this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this[4]*=t,this[5]*=t,this[6]*=t,this[7]*=t,this[8]*=t,this}get m00(){return this[0]}set m00(t){this[0]=t}get m01(){return this[1]}set m01(t){this[1]=t}get m02(){return this[2]}set m02(t){this[2]=t}get m10(){return this[3]}set m10(t){this[3]=t}get m11(){return this[4]}set m11(t){this[4]=t}get m12(){return this[5]}set m12(t){this[5]=t}get m20(){return this[6]}set m20(t){this[6]=t}get m21(){return this[7]}set m21(t){this[7]=t}get m22(){return this[8]}set m22(t){this[8]=t}debug(t="Mat3"){const e=r([this.m00,this.m01,this.m02]),i=r([this.m10,this.m11,this.m12]),s=r([this.m20,this.m21,this.m22]);console.log(t),console.log("   ",[e[0],i[0],s[0]].join(" | ")),console.log("   ",[e[1],i[1],s[1]].join(" | ")),console.log("   ",[e[2],i[2],s[2]].join(" | "))}}function n(t,e,i){return(1-i)*t+i*e}class o extends Float32Array{static newFromMix(t,e,i=.5){const r=1-i,s=r*t.x+i*e.x,n=r*t.y+i*e.y,a=r*t.z+i*e.z;return new o(s,n,a)}static distance(t,e){const i=e.x-t.x,r=e.y-t.y,s=e.z-t.z;return Math.sqrt(i*i+r*r+s*s)}constructor(t=0,e=0,i=0){if(super(3),"number"!=typeof t)return this.x=t[0],this.y=t[1],void(this.z=t[2]);this.x=t,this.y=e,this.z=i}clone(){return new o(this)}isEqual(t){const[e,i,r]=t;return e===this.x&&i===this.y&&r===this.z}isClose(t,e=1e-6){const[i,r,s]=t;return!(Math.abs(i-this.x)>e||Math.abs(r-this.y)>e||Math.abs(s-this.z)>e)}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),[s,n,o]=this,[a,h,c]=t,u=h*o-c*n,l=c*s-a*o,d=a*n-h*s,f=(s*a+n*h+o*c)*(1-i);return this.x=s*i+u*r+a*f,this.y=n*i+l*r+h*f,this.z=o*i+d*r+c*f,this}applyMatrix(t){const{x:e,y:i,z:r}=this;return this.x=e*t.m00+i*t.m10+r*t.m20,this.y=e*t.m01+i*t.m11+r*t.m21,this.z=e*t.m02+i*t.m12+r*t.m22,this}from(t){const[e,i,r]=t;return this.x=e,this.y=i,this.z=r,this}fromMix(t,e,i){const[r,s,o]=t,[a,h,c]=e;return this.reset(n(r,a,i),n(s,h,i),n(o,c,i))}reset(t,e,i){return this[0]=t,this[1]=e,this[2]=i,this}distanceToLineSquared(t,e){const[i,r,s]=this,[n,o,a]=t,[h,c,u]=e,l=h*(i-n)+c*(r-o)+u*(s-a),d=i-(n+l*h),f=r-(o+l*c),m=s-(a+l*u);return d*d+f*f+m*m}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}add(...t){for(const e of t)this[0]+=e.x,this[1]+=e.y,this[2]+=e.z;return this}addWithScale(t,e){return this[0]+=t.x*e,this[1]+=t.y*e,this[2]+=t.z*e,this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]}get size(){return Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2])}normalize(){const t=this[0]*this[0]+this[1]*this[1]+this[2]*this[2];return 0===t?this:this.scale(1/Math.sqrt(t))}cross(t){const[e,i,r]=this,[s,n,o]=t;return this[0]=i*o-n*r,this[1]=r*s-o*e,this[2]=e*n-s*i,this}random(){return this[0]=Math.random()-.5,this[1]=Math.random()-.5,this[2]=Math.random()-.5,this}debug(t="vec3"){const{x:e,y:i,z:r}=this,s=[e,i,r].map((t=>t.toFixed(6)));console.log(`${t}:   `,s.join(" | "),"   length:",Math.sqrt(e*e+i*i+r*r))}}class a extends Float32Array{constructor(t=1,e=0,i=0,r=0,s=0,n=1,o=0,a=0,h=0,c=0,u=1,l=0,d=0,f=0,m=0,g=1){super("number"==typeof t?[t,e,i,r,s,n,o,a,h,c,u,l,d,f,m,g]:t)}multiply(t){const[e,i,r,s,n,o,a,h,c,u,l,d,f,m,g,p]=this,[y,b,x,w,v,E,_,A,T,U,M,P,R,S,L,C]=t;return this.m00=e*y+n*b+c*x+f*w,this.m10=e*v+n*E+c*_+f*A,this.m20=e*T+n*U+c*M+f*P,this.m30=e*R+n*S+c*L+f*C,this.m01=i*y+o*b+u*x+m*w,this.m11=i*v+o*E+u*_+m*A,this.m21=i*T+o*U+u*M+m*P,this.m31=i*R+o*S+u*L+m*C,this.m02=r*y+a*b+l*x+g*w,this.m12=r*v+a*E+l*_+g*A,this.m22=r*T+a*U+l*M+g*P,this.m32=r*R+a*S+l*L+g*C,this.m03=s*y+h*b+d*x+p*w,this.m13=s*v+h*E+d*_+p*A,this.m23=s*T+h*U+d*M+p*P,this.m33=s*R+h*S+d*L+p*C,this}invert(t){const[e,i,r,s,n,o,a,h,c,u,l,d,f,m,g,p]=t??this,y=e*o-i*n,b=e*a-r*n,x=e*h-s*n,w=i*a-r*o,v=i*h-s*o,E=r*h-s*a,_=c*m-u*f,A=c*g-l*f,T=c*p-d*f,U=u*g-l*m,M=u*p-d*m,P=l*p-d*g,R=y*P-b*M+x*U+w*T-v*A+E*_;if(!R)return this;const S=1/R;return this[0]=(o*P-a*M+h*U)*S,this[1]=(r*M-i*P-s*U)*S,this[2]=(m*E-g*v+p*w)*S,this[3]=(l*v-u*E-d*w)*S,this[4]=(a*T-n*P-h*A)*S,this[5]=(e*P-r*T+s*A)*S,this[6]=(g*x-f*E-p*b)*S,this[7]=(c*E-l*x+d*b)*S,this[8]=(n*M-o*T+h*_)*S,this[9]=(i*T-e*M-s*_)*S,this[10]=(f*v-m*x+p*y)*S,this[11]=(u*x-c*v-d*y)*S,this[12]=(o*A-n*U-a*_)*S,this[13]=(e*U-i*A+r*_)*S,this[14]=(m*b-f*w-g*y)*S,this[15]=(c*w-u*b+l*y)*S,this}get translation(){const{m30:t,m31:e,m32:i}=this;return new o(t,e,i)}set translation(t){this.m30=t.x,this.m31=t.y,this.m32=t.z}from(t){const[e,i,r,s,n,o,a,h,c,u,l,d,f,m,g,p]=t;return this.m00=e,this.m01=i,this.m02=r,this.m03=s,this.m10=n,this.m11=o,this.m12=a,this.m13=h,this.m20=c,this.m21=u,this.m22=l,this.m23=d,this.m30=f,this.m31=m,this.m32=g,this.m33=p,this}fromMat3(t){return this.m00=t.m00,this.m01=t.m01,this.m02=t.m02,this.m10=t.m10,this.m11=t.m11,this.m12=t.m12,this.m20=t.m20,this.m21=t.m21,this.m22=t.m22,this}toAxis(t,e,i){return this.toAxisX(t),this.toAxisY(e),this.toAxisZ(i)}toAxisX(t){return t.x=this.m00,t.y=this.m01,t.z=this.m02,this}toAxisY(t){return t.x=this.m10,t.y=this.m11,t.z=this.m12,this}toAxisZ(t){return t.x=this.m20,t.y=this.m21,t.z=this.m22,this}fromQuat({x:t,y:e,z:i,w:r}){const s=t+t,n=e+e,o=i+i,a=t*s,h=e*s,c=e*n,u=i*s,l=i*n,d=i*o,f=r*s,m=r*n,g=r*o;return this.m00=1-c-d,this.m10=h-g,this.m20=u+m,this.m01=h+g,this.m11=1-a-d,this.m21=l-f,this.m02=u-m,this.m12=l+f,this.m22=1-a-c,this}get m00(){return this[0]}set m00(t){this[0]=t}get m01(){return this[1]}set m01(t){this[1]=t}get m02(){return this[2]}set m02(t){this[2]=t}get m03(){return this[3]}set m03(t){this[3]=t}get m10(){return this[4]}set m10(t){this[4]=t}get m11(){return this[5]}set m11(t){this[5]=t}get m12(){return this[6]}set m12(t){this[6]=t}get m13(){return this[7]}set m13(t){this[7]=t}get m20(){return this[8]}set m20(t){this[8]=t}get m21(){return this[9]}set m21(t){this[9]=t}get m22(){return this[10]}set m22(t){this[10]=t}get m23(){return this[11]}set m23(t){this[11]=t}get m30(){return this[12]}set m30(t){this[12]=t}get m31(){return this[13]}set m31(t){this[13]=t}get m32(){return this[14]}set m32(t){this[14]=t}get m33(){return this[15]}set m33(t){this[15]=t}debug(t="Mat4"){const e=r([this.m00,this.m01,this.m02,this.m03]),i=r([this.m10,this.m11,this.m12,this.m13]),s=r([this.m20,this.m21,this.m22,this.m23]),n=r([this.m30,this.m31,this.m32,this.m33]);console.log(t),console.log("   ",[e[0],i[0],s[0],n[0]].join(" | ")),console.log("   ",[e[1],i[1],s[1],n[1]].join(" | ")),console.log("   ",[e[2],i[2],s[2],n[2]].join(" | ")),console.log("   ",[e[3],i[3],s[3],n[3]].join(" | "))}}class h extends Float32Array{constructor(t=0,e=0,i=0,r=1){return super(4),t instanceof h?(this.x=t.x,this.y=t.y,this.z=t.z,void(this.w=t.w)):t instanceof o?(this.x=t.x,this.y=t.y,this.z=t.z,void(this.w=r)):(this.x=t,this.y=e,this.z=i,void(this.w=r))}reset(t=0,e=0,i=0,r=1){return this.x=t,this.y=e,this.z=i,this.w=r,this}from(t){const[e,i,r,s]=t;return this.x=e,this.y=i,this.z=r,this.w=s,this}clone(){return new h(this)}isEqual(t){const[e,i,r,s]=t;return e===this.x&&i===this.y&&r===this.z&&s===this.w}isClose({x:t,y:e,z:i,w:r},s=1e-6){return!(Math.abs(t-this.x)>s||Math.abs(e-this.y)>s||Math.abs(i-this.z)>s||Math.abs(r-this.w)>s)}applyMatrix(t){const{x:e,y:i,z:r,w:s}=this;return this.x=e*t.m00+i*t.m10+r*t.m20+s*t.m30,this.y=e*t.m01+i*t.m11+r*t.m21+s*t.m31,this.z=e*t.m02+i*t.m12+r*t.m22+s*t.m32,this.w=e*t.m03+i*t.m13+r*t.m23+s*t.m33,this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}get w(){return this[3]}set w(t){this[3]=t}add(...t){for(const e of t)this[0]+=e[0],this[1]+=e[1],this[2]+=e[2],e.length>3&&(this[3]+=e[3]);return this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this[2]-=t[2],t.length>3&&(this[3]-=t[3]),this}scale(t){return this[0]*=t,this[1]*=t,this[2]*=t,this[3]*=t,this}dot(t){return this[0]*t[0]+this[1]*t[1]+this[2]*t[2]+this[3]*t[3]}get size(){return Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]+this[3]*this[3])}normalize(){const t=this[0]*this[0]+this[1]*this[1]+this[2]*this[2]+this[3]*this[3];return 0===t?this:this.scale(1/Math.sqrt(t))}debug(t="vec4"){const{x:e,y:i,z:r,w:s}=this,n=[e,i,r,s].map((t=>t.toFixed(6)));console.log(`${t}:   `,n.join(" | "))}}class c extends h{constructor(t=0,e=0,i=0,r=1){"number"==typeof t?super(t,e,i,r):super(t)}clone(){return new c(this)}multiply(t){const[e,i,r,s]=this,[n,o,a,h]=t;return this[0]=h*e+n*s-o*r+a*i,this[1]=h*i+n*r+o*s-a*e,this[2]=h*r-n*i+o*e+a*s,this[3]=h*s-n*e-o*i-a*r,this}fromSlerp(t,e,i){const[r,s,n,o]=t;let a,h,[c,u,l,d]=e,f=r*c+s*u+n*l+o*d;if(f<0&&(f=-f,c=-c,u=-u,l=-l,d=-d),1-f>1e-6){const t=Math.acos(f),e=1/Math.sin(t);a=Math.sin((1-i)*t)*e,h=Math.sin(i*t)*e}else a=1-i,h=i;return this.x=a*r+h*c,this.y=a*s+h*u,this.z=a*n+h*l,this.w=a*o+h*d,this}fromAxis(t,e,i){const r=t.x+e.y+i.z;if(r>0){const s=Math.sqrt(r+1);this.w=.5*s;const n=.5/s;this.x=(e.z-i.y)*n,this.y=(i.x-t.z)*n,this.z=(t.y-e.x)*n}else{const r=[t,e,i];let s=0;e.y>t.x&&(s=1),i.z>r[s][s]&&(s=2);const n=(s+1)%3,o=(s+2)%3;let a=Math.sqrt(r[s][s]-r[n][n]-r[o][o]+1);this[s]=.5*a,a=.5/a,this[3]=(r[n][o]-r[o][n])*a,this[n]=(r[n][s]+r[s][n])*a,this[o]=(r[o][s]+r[s][o])*a}return this.normalize()}rotateAroundX(t){const e=.5*t,i=this[0],r=this[1],s=this[2],n=this[3],o=Math.sin(e),a=Math.cos(e);return this[0]=i*a+n*o,this[1]=r*a+s*o,this[2]=s*a-r*o,this[3]=n*a-i*o,this}rotateAroundY(t){const e=.5*t,i=this[0],r=this[1],s=this[2],n=this[3],o=Math.sin(e),a=Math.cos(e);return this[0]=i*a-s*o,this[1]=r*a+n*o,this[2]=s*a+i*o,this[3]=n*a-r*o,this}rotateAroundZ(t){const e=.5*t,i=this[0],r=this[1],s=this[2],n=this[3],o=Math.sin(e),a=Math.cos(e);return this[0]=i*a+r*o,this[1]=r*a-i*o,this[2]=s*a+n*o,this[3]=n*a-s*o,this}toAxisZ(t){const{x:e,y:i,z:r,w:s}=this,n=e+e,o=i+i,a=e*n,h=i*o,c=r*n,u=r*o,l=s*n,d=s*o;return t.x=c+d,t.y=u-l,t.z=1-a-h,t}face(t="+X+Y+Z"){const[e,i,r,s]=d[t];return this.x=e,this.y=i,this.z=r,this.w=s,this}}const u=Math.sqrt(2)/2,l=.5,d={"+X+Y+Z":[0,0,0,1],"-Z+Y+X":[0,+u,0,+u],"-X+Y-Z":[0,1,0,0],"+Z+Y-X":[0,-u,0,+u],"+X+Z-Y":[+u,0,0,+u],"+Y+Z+X":[+l,+l,+l,+l],"-X+Z+Y":[0,+u,+u,0],"-Y+Z-X":[+l,-l,-l,+l],"+X-Y-Z":[1,0,0,0],"+X-Z+Y":[-u,0,0,+u],"-X-Y+Z":[0,0,1,0],"-X-Z-Y":[0,+u,-u,0],"+Y+X-Z":[+u,+u,0,0],"+Y-X+Z":[0,0,+u,+u],"+Y-Z-X":[+l,+l,-l,-l],"-Y+X+Z":[0,0,-u,+u],"-Y-X-Z":[+u,-u,0,0],"-Y-Z+X":[+l,-l,+l,-l],"+Z+X+Y":[+l,+l,+l,-l],"+Z-X-Y":[+l,-l,+l,+l],"+Z-Y+X":[+u,0,+u,0],"-Z+X-Y":[+l,+l,-l,+l],"-Z-X+Y":[+l,-l,-l,-l],"-Z-Y-X":[+u,0,-u,0]};class f extends Float32Array{static fromMix(t,e,i=.5){const r=1-i,s=r*t.x+i*e.x,n=r*t.y+i*e.y;return new f(s,n)}static distance(t,e){const i=e.x-t.x,r=e.y-t.y;return Math.sqrt(i*i+r*r)}constructor(t=0,e=0){if(super(2),"number"!=typeof t)return this.x=t[0],void(this.y=t[1]);this.x=t,this.y=e}clone(){return new f(this)}isEqual(t){const[e,i]=t;return e===this.x&&i===this.y}isClose(t,e=1e-6){const[i,r]=t;return!(Math.abs(i-this.x)>e||Math.abs(r-this.y)>e)}from(t){const[e,i]=t;return this.x=e,this.y=i,this}fromMix(t,e,i){const[r,s]=t,[o,a]=e;return this.reset(n(r,o,i),n(s,a,i))}reset(t,e){return this[0]=t,this[1]=e,this}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}add(...t){for(const e of t)this[0]+=e.x,this[1]+=e.y;return this}addWithScale(t,e){return this[0]+=t.x*e,this[1]+=t.y*e,this}subtract(t){return this[0]-=t[0],this[1]-=t[1],this}scale(t){return this[0]*=t,this[1]*=t,this}dot(t){return this[0]*t[0]+this[1]*t[1]}get size(){return Math.sqrt(this[0]*this[0]+this[1]*this[1])}normalize(){const t=this[0]*this[0]+this[1]*this[1];return 0===t?this:this.scale(1/Math.sqrt(t))}random(){return this[0]=Math.random()-.5,this[1]=Math.random()-.5,this}debug(t="vec2"){const{x:e,y:i}=this,r=[e,i].map((t=>t.toFixed(6)));console.log(`${t}:   `,r.join(" | "),"   length:",Math.sqrt(e*e+i*i))}}class m{listeners=new Set;addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}dispatch(t){this.listeners.forEach((e=>e(t)))}}class g{static incrementalId=1;eventTransformChange=new m;name;_screenWidth=1920;_screenHeight=1080;_screenAspectRatio=1920/1080;_dirtyModelView=!0;dirtyModelViewInverse=!0;_dirtyAxis=!0;_dirtyProjection=!0;dirtyProjectionInverse=!0;_near=.001;_far=1/0;_axisX=new o;_axisY=new o;_axisZ=new o;_matrixModelView=new a;_matrixModelViewInverse=new a;_matrixProjectionInverse=new a;_orientation=new c(0,0,0,1);_shift=new o(0,0,0);_target=new o(0,0,0);_position=new o(0,0,0);_distance=10;_zoom=1;tmpMat3=new s;tmpVec3=new o;constructor(t={}){this.name=t.name??"TgdCamera#"+g.incrementalId++,this._near=t.near??.001,this._far=t.far??1e6,this._distance=t.distance??10,this._zoom=t.zoom??1;const[e,i,r]=t.target??[0,0,0];this.target.reset(e,i,r);const[s,n,o,a]=t.orientation??[0,0,0,1];this.orientation.reset(s,n,o,a)}get near(){return this._near}set near(t){t!==this._near&&(this._near=t,this.dirtyProjection=!0)}get far(){return this._far}set far(t){t!==this._far&&(this._far=t,this.dirtyProjection=!0)}get screenAspectRatio(){return this._screenAspectRatio}get screenWidth(){return this._screenWidth}set screenWidth(t){t!==this._screenWidth&&(this._screenWidth=t,this.dirtyProjection=!0,this._screenAspectRatio=this._screenWidth/this._screenHeight)}get screenHeight(){return this._screenHeight}set screenHeight(t){t!==this._screenHeight&&(this._screenHeight=t,this.dirtyProjection=!0,this._screenAspectRatio=this._screenWidth/this._screenHeight)}get spaceHeightAtTarget(){return this.getSpaceHeightAtTarget()}set spaceHeightAtTarget(t){this.setSpaceHeightAtTarget(t)}get spaceWidthAtTarget(){return this.screenWidth*this.spaceHeightAtTarget/this.screenHeight}set spaceWidthAtTarget(t){this.setSpaceHeightAtTarget(t*this.screenHeight/this.screenWidth)}face(t){this._orientation.face(t),this.dirtyModelView=!0,this.dirtyAxis=!0}from(t){const{_orientation:e,_target:i,distance:r,zoom:s,screenWidth:n,screenHeight:o}=t;return this._orientation.from(e),this._target.from(i),this.distance=r,this.zoom=s,this.screenWidth=n,this.screenHeight=o,this.dirtyModelView=!0,this.dirtyAxis=!0,this.copyProjectionFrom(t),this}get axisX(){return this.updateAxisIfNeeded(),this._axisX}get axisY(){return this.updateAxisIfNeeded(),this._axisY}get axisZ(){return this.updateAxisIfNeeded(),this._axisZ}get matrixModelView(){return this.updateIfNeeded(),this._matrixModelView}get matrixModelViewInverse(){return this.dirtyModelViewInverse&&(this._matrixModelViewInverse.invert(this.matrixModelView),this.dirtyModelViewInverse=!1),this._matrixModelViewInverse}get matrixProjectionInverse(){return this.dirtyProjectionInverse&&(this._matrixProjectionInverse.invert(this.matrixProjection),this.dirtyProjectionInverse=!1),this._matrixProjectionInverse}get orientation(){return this._orientation}set orientation(t){const{_orientation:e}=this;if(t.isEqual(e))return;const[i,r,s,n]=t;e.x=i,e.y=r,e.z=s,e.w=n,this.dirtyModelView=!0,this.dirtyAxis=!0}setOrientation(t,e,i,r){const{_orientation:s}=this;return s.x=t,s.y=e,s.z=i,s.w=r,this.dirtyModelView=!0,this.dirtyAxis=!0,this}get position(){return this.updateIfNeeded(),this._position}get target(){return this._target}set target(t){this._target.from(t),this.dirtyModelView=!0}setTarget(t,e,i){const{_target:r}=this;return r.x=t,r.y=e,r.z=i,this.dirtyModelView=!0,this}get shift(){return this._shift}set shift(t){this._shift.from(t),this.dirtyModelView=!0}setShift(t,e,i){const{_shift:r}=this;return r.x=t,r.y=e,r.z=i,this.dirtyModelView=!0,this}get x(){return this._target.x}set x(t){const{_target:e}=this;t!==e.x&&(e.x=t,this.dirtyModelView=!0)}get y(){return this._target.y}set y(t){const{_target:e}=this;t!==e.y&&(e.y=t,this.dirtyModelView=!0)}get z(){return this._target.z}set z(t){const{_target:e}=this;t!==e.z&&(e.z=t,this.dirtyModelView=!0)}get distance(){return this._distance}set distance(t){this._distance!==t&&(this._distance=t,this.dirtyModelView=!0)}get zoom(){return this._zoom}set zoom(t){this._zoom!==t&&(this._zoom=t,this.dirtyModelView=!0)}moveTarget(t,e,i){const{_target:r}=this;this.updateAxisIfNeeded();const{_axisX:s,_axisY:n,_axisZ:o,tmpVec3:a}=this;a.from(s).scale(t).addWithScale(n,e).addWithScale(o,i),r.x+=a.x,r.y+=a.y,r.z+=a.z,this.dirtyModelView=!0}moveShift(t,e,i){const[r,s,n]=this._shift;this._shift.reset(t+r,e+s,i+n),this._dirtyModelView=!0}orbitAroundX(t){this.updateAxisIfNeeded();const{_axisX:e,_axisY:i,_axisZ:r,_orientation:s}=this;return i.rotateAround(e,t),r.rotateAround(e,t),s.fromAxis(e,i,r),this.dirtyModelView=!0,this}orbitAroundY(t){this.updateAxisIfNeeded();const{_axisX:e,_axisY:i,_axisZ:r,_orientation:s}=this;return e.rotateAround(i,t),r.rotateAround(i,t),s.fromAxis(e,i,r),this.dirtyModelView=!0,this}orbitAroundZ(t){this.updateAxisIfNeeded();const{_axisX:e,_axisY:i,_axisZ:r,_orientation:s}=this;return e.rotateAround(r,t),i.rotateAround(r,t),s.fromAxis(e,i,r),this.dirtyModelView=!0,this}debug(t){this._orientation.debug(`${t??this.name} quaternion:`)}updateAxisIfNeeded(){this.dirtyAxis&&this.updateAxis()}updateAxis(){const{tmpMat3:t}=this;t.fromQuat(this._orientation),t.toAxis(this._axisX,this._axisY,this._axisZ),this.dirtyAxis=!1}updateIfNeeded(){if(!this.dirtyModelView)return;const{tmpMat3:t,tmpVec3:e,_position:i}=this,r=this._matrixModelView;this.updateAxis();const s=this._distance,{x:n,y:o,z:a}=this._shift,{x:h,y:c,z:u}=this._target,{x:l,y:d,z:f}=this._axisZ;i.x=h+s*l,i.y=c+s*d,i.z=u+s*f,i.addWithScale(this._axisX,n),i.addWithScale(this._axisY,o),i.addWithScale(this._axisZ,a),e.from(i).applyMatrix(t.transpose()).scale(-1),r.m30=e.x,r.m31=e.y,r.m32=e.z,r.fromMat3(t),this.dirtyModelView=!1}get dirtyModelView(){return this._dirtyModelView}set dirtyModelView(t){this._dirtyModelView=t,t&&(this.dirtyModelViewInverse=!0,this.eventTransformChange.dispatch(this))}get dirtyAxis(){return this._dirtyAxis}set dirtyAxis(t){this._dirtyAxis=t}get dirtyProjection(){return this._dirtyProjection}set dirtyProjection(t){this._dirtyProjection=t,t&&(this.dirtyProjectionInverse=!0)}}class p extends g{_matrixProjection=new a;_fovy=Math.PI/4;_ray={origin:new o,direction:new o};constructor(t={}){super(t),this._fovy=t.fovy??Math.PI/4}copyProjectionFrom(t){return this.fovy=t.fovy,this.near=t.near,this.far=t.far,this}castRay(t,e){const{origin:i,direction:r}=this._ray;i.from(this.position);const s=Math.atan(this.fovy),n=s*this.screenAspectRatio;return r.from(i).subtract(this.axisZ).addWithScale(this.axisX,n*t).addWithScale(this.axisY,s*e).subtract(i).normalize(),this._ray}get fovy(){return this._fovy}set fovy(t){t!==this._fovy&&(this._fovy=t,this.dirtyProjection=!0)}get matrixProjection(){return this.updateProjectionIfNeeded(),this._matrixProjection}getSpaceHeightAtTarget(){return 2*Math.tan(.5*this.fovy)*this.distance}setSpaceHeightAtTarget(t){this.distance=t/(2*Math.tan(.5*this.fovy))}updateProjectionIfNeeded(){if(!this.dirtyProjection)return;const t=this._fovy,e=this.screenAspectRatio,i=this._near,r=this._far,s=this._matrixProjection,n=this.zoom/Math.tan(t/2);if(s[0]=n/e,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=n,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,r!==1/0){const t=1/(i-r);s[10]=(r+i)*t,s[14]=2*r*i*t}else s[10]=-1,s[14]=-2*i;this.dirtyProjection=!0}}class y{gl;buffer;_target;_usage;constructor(t,e,i){this.gl=t;const r=t.createBuffer();if(!r)throw Error("Unable to create WebGLBuffer!");this._target=i?.target??"ARRAY_BUFFER",this._usage=i?.usage??"STATIC_DRAW",this.buffer=r,e&&this.bufferData(e,i)}get target(){return this._target}bind(t){const{gl:e,buffer:i}=this;this._target=t??this._target,e.bindBuffer(e[this._target],i)}bufferData(t,e={}){const{gl:i}=this;this.bind(e.target),this._usage=e.usage??this._usage,i.bufferData(i[this._target],t,i[this._usage])}delete(){const{gl:t,buffer:e}=this;t.deleteBuffer(e)}}class b{eventKeyPress=new m;keysDown=new Set;keysUp=new Set;attached=!1;constructor(){document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp),this.attached=!0}detach(){this.attached&&(document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.attached=!1)}isUp(...t){return!this.isDown(...t)}isDown(...t){for(const e of t)if(!this.keysDown.has(e))return!1;return!0}hasClicked(t){return!!this.keysUp.has(t)&&(this.keysUp.delete(t),!0)}handleKeyDown=t=>{this.keysDown.add(t.key),this.keysUp.delete(t.key)};handleKeyUp=t=>{this.keysDown.delete(t.key),this.keysUp.add(t.key),this.eventKeyPress.dispatch(t)}}class x{canvas;eventTap=new m;eventMoveStart=new m;eventMove=new m;eventMoveEnd=new m;eventZoom=new m;tapDelay=300;controlKeys={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1};start={x:0,y:0,t:0,fingersCount:1};current={x:0,y:0,t:0,fingersCount:1};previous={x:0,y:0,t:0,fingersCount:1};pointerEvent=null;constructor(t){this.canvas=t,t.addEventListener("pointerdown",this.handlePointerDown,!0),t.addEventListener("wheel",this.handleCanvasWheel),t.addEventListener("contextmenu",this.handleContextMenu),t.addEventListener("pointermove",this.handlePointerMove),t.addEventListener("pointerup",this.handlePointerUp)}detach(){const{canvas:t}=this;t&&(t.removeEventListener("pointerdown",this.handlePointerDown),t.removeEventListener("wheel",this.handleCanvasWheel),t.removeEventListener("contextmenu",this.handleContextMenu),t.removeEventListener("pointermove",this.handlePointerMove),t.removeEventListener("pointerup",this.handlePointerUp))}handleContextMenu=t=>{t.preventDefault()};handleCanvasWheel=t=>{let e=t.deltaX+t.deltaY+t.deltaZ;e=e>0?1:-1,this.eventZoom.dispatch({current:this.getPoint(t),direction:e,preventDefault:()=>t.preventDefault(),...this.controlKeys})};handlePointerDown=t=>{if(!t.isPrimary)return;this.canvas.setPointerCapture(t.pointerId),t.preventDefault(),t.stopPropagation(),this.pointerEvent=t;const e=this.getPoint(t);this.start=this.current=this.previous=e,this.eventMoveStart.dispatch({start:e,current:e,previous:e,...this.controlKeys})};handlePointerMove=t=>{t.isPrimary&&this.pointerEvent&&this.canvas&&(this.previous=this.current,this.current=this.getPoint(t),this.eventMove.dispatch({start:this.start,current:this.current,previous:this.previous,...this.controlKeys}))};handlePointerUp=t=>{t.isPrimary&&this.pointerEvent&&(t.preventDefault(),this.current=this.getPoint(t),this.eventMoveEnd.dispatch({start:this.start,current:this.current,previous:this.previous,...this.controlKeys}),this.pointerEvent=null,t.timeStamp-this.start.t<this.tapDelay&&this.eventTap.dispatch({...this.start,...this.controlKeys}))};getPoint(t){this.controlKeys={altKey:t.altKey||2===t.buttons,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey};const{left:e,top:i,width:r,height:s}=this.canvas.getBoundingClientRect();return{x:2*((t.clientX-e)/r-.5),y:-2*((t.clientY-i)/s-.5),t:t.timeStamp,fingersCount:1}}}class w{canvas;_keyboard=null;_pointer=null;constructor(t){this.canvas=t}get keyboard(){return this._keyboard||(this._keyboard=new b),this._keyboard}get pointer(){return this._pointer||(this._pointer=new x(this.canvas)),this._pointer}}let v=1;class E{keys=new Map;objects=new Map;references=new Map;create(t,e){const i=e??this.makeKeyFromInput(t)??"TgdResource:"+v++,r=this.references.get(i)??0;if(r<1){const e=this.actualCreate(t,i);return this.keys.set(e,i),this.objects.set(i,e),this.references.set(i,1),e}const s=this.objects.get(i);if(!s)throw Error("[TgdResource.create] Panic!");return this.references.set(i,r+1),s}delete(t){const e=this.keys.get(t);if(!e)return;const i=this.references.get(e)??0;i<1||(i>1?this.references.set(e,i-1):(this.keys.delete(t),this.objects.delete(e),this.references.delete(e),this.actualDelete(t)))}makeKeyFromInput(t){return null}}class _{gl;code;program;shaders;uniformsLocations;constructor(t,e){this.gl=t,this.code=e;const i=t.createProgram();if(!i)throw Error("Unable to create WebGLProgram!");const r=this.createShader("VERTEX_SHADER",e.vert);t.attachShader(i,r);const s=this.createShader("FRAGMENT_SHADER",e.frag);if(t.attachShader(i,s),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const r=t.getProgramInfoLog(i)??"";console.warn(r);const s=T(r);throw M("Vertex Shader",e.vert,s),M("Fragment Shader",e.frag,s),new Error("Could NOT link WebGL2 program!\n"+r)}this.program=i,this.shaders=[r,s],this.uniformsLocations=this.getUniformsLocations(),t.detachShader(i,r),t.deleteShader(r),t.detachShader(i,s),t.deleteShader(s)}toCode({indent:t=""}={}){return["function createProgram(gl: WebGL2RenderingContext) {","  const prg = gl.createProgram()","  const vertexShader = gl.createShader(gl.VERTEX_SHADER)",`  gl.shaderSource(vertexShader, \`${this.code.vert}\`)`,"  gl.compileShader(vertexShader)","  const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER)",`  gl.shaderSource(fragmentShader, \`${this.code.frag}\`)`,"  gl.compileShader(fragmentShader)","  gl.attachShader(prg, vertexShader)","  gl.attachShader(prg, fragmentShader)","  gl.linkProgram(prg)","  return prg","}"].map((e=>`${t}${e}`)).join("\n")}hasAttribute(t){const{gl:e,program:i}=this;return e.getAttribLocation(i,t)>=0}getAttribLocation(t){const{gl:e,program:i}=this,r=e.getAttribLocation(i,t);if(r<0)throw Error(`Attribute "${t}" not found!`);return r}getUniformLocation(t){const{uniformsLocations:e}=this,i=Object.keys(e);if(0===t.length)return console.warn(`Uniform "${t}" has not been found: there is no active uniform in this program!`),0;const r=e[t];return r||console.warn(`No active uniform found with name "${t}"!\nAvailable names are: ${i.join(", ")}.`),r}uniform1f(t,e){const{gl:i}=this;i.uniform1f(this.getUniformLocation(t),e)}uniform2f(t,e,i){const{gl:r}=this;r.uniform2f(this.getUniformLocation(t),e,i)}uniform3f(t,e,i,r){const{gl:s}=this;s.uniform3f(this.getUniformLocation(t),e,i,r)}uniform3fv(t,e){const{gl:i}=this;i.uniform3fv(this.getUniformLocation(t),e)}uniform4f(t,e,i,r,s){const{gl:n}=this;n.uniform4f(this.getUniformLocation(t),e,i,r,s)}uniform4fv(t,e){const{gl:i}=this;i.uniform4fv(this.getUniformLocation(t),e)}uniform1i(t,e){const{gl:i}=this;i.uniform1i(this.getUniformLocation(t),e)}uniform2i(t,e,i){const{gl:r}=this;r.uniform2i(this.getUniformLocation(t),e,i)}uniform3i(t,e,i,r){const{gl:s}=this;s.uniform3i(this.getUniformLocation(t),e,i,r)}uniform4i(t,e,i,r,s){const{gl:n}=this;n.uniform4i(this.getUniformLocation(t),e,i,r,s)}uniform1ui(t,e){const{gl:i}=this;i.uniform1ui(this.getUniformLocation(t),e)}uniform2ui(t,e,i){const{gl:r}=this;r.uniform2ui(this.getUniformLocation(t),e,i)}uniform3ui(t,e,i,r){const{gl:s}=this;s.uniform3ui(this.getUniformLocation(t),e,i,r)}uniform4ui(t,e,i,r,s){const{gl:n}=this;n.uniform4ui(this.getUniformLocation(t),e,i,r,s)}uniformMatrix4fv(t,e){const{gl:i}=this;i.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}use(){const{gl:t,program:e}=this;t.useProgram(e)}delete(){const{gl:t}=this;this.shaders.forEach((e=>t.deleteShader(e))),t.deleteProgram(this.program)}createShader(t,e){const{gl:i}=this,r=i.createShader(i[t]);if(!r)throw Error(`Unable to create a WebGLShader of type "${t}"!`);i.shaderSource(r,e),i.compileShader(r);const s=i.getShaderInfoLog(r);if(s)throw console.error(`Error in ${t} code:`,s),M(t,e,T(s)),Error(`Unable to compile ${t}!`);return r}getUniformsLocations(){const{gl:t,program:e}=this,i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);if("number"!=typeof i)throw Error("Unable to get the number of uniforms in a WebGLProgram!");const r={};for(let s=0;s<i;s++){const i=t.getActiveUniform(e,s);if(!i)continue;const n=t.getUniformLocation(e,i.name);if(null===n)throw Error(`Unable to get location for uniform "${i.name}"!`);r[i.name]=n}return r}}const A=/^ERROR:[ \t]+([0-9]+):([0-9]+):/g;function T(t){const e=[],i=[];for(const r of t.split("\n")){A.lastIndex=-1;const t=A.exec(r);t&&(e.push(parseInt(t[2],10)),i.push(r.substring(t[0].length).trim()))}return{lines:e,messages:i}}function U(t,e=!1){return`color:#fff;background:${t};font-family:monospace;font-size:80%;font-weight:${e?"bolder":"100"}`}function M(t,e,i){console.log(`%c${t}`,"font-weight:bolder;font-size:120%"),e.split("\n").forEach(((t,e)=>{const r=e+1,s=(1e-4*r).toFixed(4).substring(2),n=i.lines.includes(r)?"#f00":"#000";console.log(`%c${s}  %c${t}`,U(n),U(n,!0)),i.lines.includes(r)&&console.error(i.messages[i.lines.indexOf(r)])}))}class P extends E{gl;constructor(t){super(),this.gl=t}actualCreate(t){return new _(this.gl,t)}actualDelete(t){t instanceof _&&t.delete()}makeKeyFromInput(t){return JSON.stringify(t)}}class R{static async image(t){return new Promise((e=>{const i=new Image;i.onload=()=>e(i),i.onerror=()=>{console.error("Unable to load image: ",t),e(null)},i.src=t}))}static async canvas(t){const e=await R.image(t);if(!e)return null;const i=document.createElement("canvas");i.width=e.naturalWidth,i.height=e.naturalHeight;const r=i.getContext("2d");if(!r)throw Error("Unable to get a 2D context!");return r.drawImage(e,0,0),i}}function S(t,e,i){const r=document.createElement("canvas");r.width=t,r.height=e;const s=r.getContext("2d",i);if(!s)throw Error("Unable to create 2D context!");return{canvas:r,ctx:s}}function L(t){if(t instanceof Uint8Array)return WebGL2RenderingContext.UNSIGNED_BYTE;if(t instanceof Uint16Array)return WebGL2RenderingContext.UNSIGNED_SHORT;if(t instanceof Uint32Array)return WebGL2RenderingContext.UNSIGNED_INT;throw Error("[webglElementTypeFromDataView] drawElements() and drawElementsInstanced() can only be fed with Uint8Array, Uint16Array or Uint32Array!")}class C{context;id;glTexture;eventImageUpdate=new m;options;_width=0;_height=0;_image=null;constructor(t,e,i={}){this.context=t,this.id=e;const{gl:r}=t;this.options={wrapS:"REPEAT",wrapT:"REPEAT",wrapR:"REPEAT",minFilter:"NEAREST_MIPMAP_LINEAR",magFilter:"LINEAR",width:1,height:1,internalFormat:"RGBA",...i};const s=r.createTexture();if(!s)throw Error("Unable to create a WebGLTexture!");this.glTexture=s;const{wrapS:n="CLAMP_TO_EDGE",wrapT:o="CLAMP_TO_EDGE",wrapR:a="CLAMP_TO_EDGE",minFilter:h="LINEAR",magFilter:c="LINEAR",generateMipMap:u=!1,width:l=1,height:d=1,internalFormat:f="RGBA",data:m}=this.options,g=this.options.format??f;r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,r[f],l,d,0,r[g],r.UNSIGNED_BYTE,m??null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r[n]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r[o]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_R,r[a]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r[h]),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r[c]),i.image?this.loadImage(i.image):u&&r.generateMipmap(r.TEXTURE_2D)}getParameter(t){const{context:e,glTexture:i}=this,{gl:r}=e;return r.bindTexture(r.TEXTURE_2D,i),r.getTexParameter(r.TEXTURE_2D,r[t])}makePalette(t,e=0){const i=e>0?e:t.length,r=Math.ceil(t.length/i),{canvas:s,ctx:n}=S(i,r);let o=0;for(let e=0;e<r;e++)for(let r=0;r<i;r++)n.fillStyle=t[o++],n.fillRect(r,e,1,1);this.loadImage(s)}fillHorizontalGradient(t,...e){this.fillGradient(t,1,1,0,...e)}fillverticalGradient(t,...e){this.fillGradient(1,t,0,1,...e)}fillGradient(t,e,i,r,...s){const{canvas:n,ctx:o}=S(t,e),a=o.createLinearGradient(0,0,t*i,e*r);for(let t=0;t<s.length;t++)a.addColorStop(t/(s.length-1),s[t]);o.fillStyle=a,o.fillRect(0,0,t,e),this.loadImage(n),n.style.position="fixed"}delete(){this.context.gl.deleteTexture(this.glTexture)}get image(){return this._image}get width(){return this._width}get height(){return this._height}bind(){const{gl:t}=this.context;t.bindTexture(t.TEXTURE_2D,this.glTexture)}activate(t,e,i=0){const{context:r,glTexture:s}=this,{gl:n}=r;n.activeTexture(n.TEXTURE0+i),n.bindTexture(n.TEXTURE_2D,s),t.uniform1i(e,i)}loadImage(t){if("string"==typeof t)return void R.image(t).then((e=>{e?(this.loadImage(e),this.context.paint()):console.error("[TgdTexture2D] Unable to load image:",t)})).catch(console.error);const{context:e,glTexture:i}=this,{gl:r}=e;r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.generateMipmap(r.TEXTURE_2D),this._width=t.width,this._height=t.height,this._image=t,this.eventImageUpdate.dispatch(this)}}class I{context;texture;_width=0;_height=0;numberOfImagesToLoad=6;constructor(t,e){this.context=t;const{gl:i}=t,r=i.createTexture();if(!r)throw Error("Unable to create a WebGLTexture!");this.texture=r,this.loadImage(i.TEXTURE_CUBE_MAP_POSITIVE_X,e.imagePosX),this.loadImage(i.TEXTURE_CUBE_MAP_NEGATIVE_X,e.imageNegX),this.loadImage(i.TEXTURE_CUBE_MAP_POSITIVE_Y,e.imagePosY),this.loadImage(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.imageNegY),this.loadImage(i.TEXTURE_CUBE_MAP_POSITIVE_Z,e.imagePosZ),this.loadImage(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,e.imageNegZ)}delete(){this.context.gl.deleteTexture(this.texture)}get ready(){return 0===this.numberOfImagesToLoad}get width(){return this._width}get height(){return this._height}bind(){const{gl:t}=this.context;t.bindTexture(t.TEXTURE_CUBE_MAP,this.texture)}activate(t,e,i=0){if(!this.ready)return;const{context:r,texture:s}=this,{gl:n}=r;n.activeTexture(n.TEXTURE0+i),n.bindTexture(n.TEXTURE_CUBE_MAP,s),t.uniform1i(e,i)}loadImage(t,e){if("string"==typeof e)return void R.image(e).then((i=>{i?this.loadImage(t,i):console.error(`[TgdTextureCube] Unable to load image "${e}":`,e)})).catch((t=>{console.error(`[TgdTextureCube] Unable to load image "${e}":`,t)}));const{width:i,height:r}=e;if(i!==r)throw Error(`Images in a CubeMap must be squares, but we got ${i}×${r}!`);if(0===this._width)this._width=i,this._height=r;else if(this._width!==i||this._height!==r)throw Error(`Images in a CubeMap must all have the same size, but we got ${this._width}×${this._height} and ${i}×${r}!`);const{context:s,texture:n}=this,{gl:o}=s;o.bindTexture(o.TEXTURE_CUBE_MAP,n),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e instanceof Image),o.texImage2D(t,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),this.numberOfImagesToLoad--,0===this.numberOfImagesToLoad&&(o.generateMipmap(o.TEXTURE_CUBE_MAP),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR_MIPMAP_LINEAR),s.paint())}}class D extends E{context;constructor(t){super(),this.context=t}getDefaultEmpty(){return this.create({width:1,height:1},"@tgd/DefaultTexture2D")}actualCreate(t,e){return new C(this.context,e,t)}actualDelete(t){t instanceof C&&t.delete()}}class F extends E{context;constructor(t){super(),this.context=t}actualCreate(t){return new I(this.context,t)}actualDelete(t){t instanceof I&&t.delete()}}class z{gl;datasets;vao;drawBuffers=[];elemBuffer=null;constructor(t,e,i,r){this.gl=t,this.datasets=i;const s=t.createVertexArray();if(!s)throw Error("Unable to create VertexArrayObject!");if(this.vao=s,e&&i){if(t.bindVertexArray(s),this.drawBuffers=i.map((i=>{const r=new y(t,i.data,{target:i.target,usage:i.usage});return r.bind(),i.defineAttributes(t,e),r})),r){const e=new y(t,r,{target:"ELEMENT_ARRAY_BUFFER"});e.bind(),this.elemBuffer=e}t.bindVertexArray(null)}}toCode({indent:t=""}={}){const e=["function createVAO(","  gl: WebGL2RenderingContext,",`  prg: WebGLProgram${this.datasets?.map(((t,e)=>`, data${e}: ArrayBuffer`)).join("")}`,") {","  const vao = gl.createVertexArray()","  gl.bindVertexArray(vao)"];return this.datasets?.forEach(((i,r)=>{e.push(`  const buff${r} = gl.createBuffer()`,`  gl.bindBuffer(gl.${i.target}, buff${r})`,`  gl.bufferData(gl.${i.target}, data${r}, gl.${i.usage})`,i.toCode({indent:`${t}  `}))})),e.push("  return vao","}"),e.map((e=>`${t}${e}`)).join("\n")}bind(){this.gl.bindVertexArray(this.vao)}unbind(){this.gl.bindVertexArray(null)}delete(){const{gl:t,vao:e,drawBuffers:i,elemBuffer:r}=this;t.deleteVertexArray(e),i.forEach((t=>t.delete())),r&&r.delete()}}class ${active=!0}class B extends ${active=!0;onEnter;onExit;painters;constructor(t=[],{onEnter:e,onExit:i}={}){super(),this.onEnter=e,this.onExit=i,this.painters=[...t]}forEachChild(t){this.painters.forEach(((e,i)=>t(e,i)))}has(t){return this.painters.includes(t)}add(...t){for(const e of t)this.painters.push(e)}remove(...t){for(const e of t){const t=this.painters.indexOf(e);t<0||(this.painters.splice(t,1),e.delete())}}removeAll(){for(const t of this.painters)t.delete();this.painters.splice(0,this.painters.length)}delete(){for(const t of this.painters)t.delete();this.painters.splice(0,this.painters.length)}paint(t,e){if(this.active){this.onEnter?.(t,e);for(const i of this.painters)i.active&&i.paint(t,e);this.onExit?.(t,e)}}}class N{animations=new Map;schedule(t){const{action:e,duration:i,easingFunction:r,repeat:s}=t;return this.animations.set(t,{start:-1,duration:i,inverseDuration:1/i,action:r?t=>e(r(t)):e,loop:1,repeat:s??1,cancel:()=>this.cancel(t)}),t}cancel(t){this.animations.delete(t)}paint(t){if(0===this.animations.size)return!1;for(const e of this.animations.values()){e.start<0&&(e.start=t);const i=Math.min(1,e.inverseDuration*(t-e.start));for(e.action(i);t>e.start+e.duration;)e.loop++,e.start+=e.duration;e.loop>e.repeat&&e.cancel()}return!0}}class k{canvas;options;static incrementalId=1;name;gl;inputs;programs;textures2D;_texturesCube=null;_camera;observer;painters;isPlaying=!1;requestAnimationFrame=-1;lastTime=-1;animationManager=new N;constructor(t,e={}){this.canvas=t,this.options=e;const i=t.getContext("webgl2",e);if(!i)throw Error("Unable to create a WebGL2 context!");this.gl=i,this.programs=new P(i),this.textures2D=new D(this),this.observer=new ResizeObserver((()=>{const r=t.clientWidth,s=t.clientHeight;t.width=r,t.height=s,i.viewport(0,0,r,s),this.paint(),e.onResize?.(this,t.clientWidth,t.clientHeight)})),this.observer.observe(t),this.inputs=new w(t),this._camera=new p,this.painters=new B,this.name=e.name??"TgdContext#"+k.incrementalId++,t.style.touchAction="none"}get camera(){return this._camera}set camera(t){t!==this._camera&&(this._camera.eventTransformChange.removeListener(this.paint),t.eventTransformChange.addListener(this.paint),this._camera=t,this.paint())}get texturesCube(){return this._texturesCube||(this._texturesCube=new F(this)),this._texturesCube}animSchedule(t){const e=this.animationManager.schedule(t);return this.paint(),e}animCancel(t){this.animationManager.cancel(t)}get onEnter(){return this.painters.onEnter}set onEnter(t){this.painters.onEnter=t}get onExit(){return this.painters.onExit}set onExit(t){this.painters.onExit=t}get width(){return this.gl.drawingBufferWidth}get height(){return this.gl.drawingBufferHeight}get playing(){return this.isPlaying}set playing(t){t!==this.isPlaying&&(t&&this.paint(),this.isPlaying=t)}play(){this.playing=!0}pause(){this.playing=!1}has(t){return this.painters.has(t)}add(...t){this.painters.add(...t)}remove(...t){this.painters.remove(...t)}removeAll(){this.painters.removeAll()}createBuffer(t,e){return new y(this.gl,t,e)}createFramebuffer(){const t=this.gl.createFramebuffer();if(!t)throw Error("Unable to create a WebGL2 Framebuffer!");return t}createVAO(t,e,i){return new z(this.gl,t,e,i)}takeSnapshot(t){const e=t.getContext("2d");if(!e)throw Error("[TgdContext.takeSnapshot] We cannot get a 2D context for the target canvas! Maybe it already has another type of context.");const{width:i,height:r}=t,s=function(t,e){const i=document.createElement("canvas");return i.width=t,i.height=e,i}(i,r),n=new k(s,this.options);this.painters.forEachChild((t=>n.add(t))),n.actualPaint(this.lastTime),n.gl.finish(),e.drawImage(s,0,0)}lookupWebglConstant(t){const{gl:e}=this;for(const i in e)if(e[i]===t)return i;return`Unknown gl[${t}]`}paint=()=>{window.cancelAnimationFrame(this.requestAnimationFrame),this.requestAnimationFrame=window.requestAnimationFrame(this.actualPaint)};actualPaint=t=>{const{lastTime:e,gl:i}=this;if(e<0)return this.lastTime=t,void this.paint();const r=t-this.lastTime;this.lastTime=t,this._camera.screenWidth=i.drawingBufferWidth,this._camera.screenHeight=i.drawingBufferHeight,this.painters.paint(t,r),(this.animationManager.paint(t)||this.isPlaying)&&this.paint()};destroy(){window.cancelAnimationFrame(this.requestAnimationFrame),this.playing=!1,this.painters.delete(),this.observer.unobserve(this.canvas)}stateReset(){const{gl:t}=this,e=t.getParameter(t.MAX_VERTEX_ATTRIBS),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i);for(let i=0;i<e;++i)t.disableVertexAttribArray(i),t.vertexAttribPointer(i,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(i,0);t.deleteBuffer(i);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(let e=0;e<r;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);return t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),t}}class V{attributesDefinition;options;stride=0;definitions={};_data=new ArrayBuffer(0);_count=0;target;usage;constructor(t,e={}){this.attributesDefinition=t,this.options=e,this.target=e.target??"ARRAY_BUFFER",this.usage=e.usage??"STATIC_DRAW",this.initialize(t,e)}initialize(t,e={}){const i=e.divisor??0;let r=0;const s={},n={};for(const e of Object.keys(t)){s[e]=new ArrayBuffer(0);const o={dimension:j[t[e]],byteOffset:r,bytesPerElement:Float32Array.BYTES_PER_ELEMENT,divisor:i,getter:(t,e)=>(e>=t.byteLength&&(e%=t.byteLength),t.getFloat32(e,!0)),setter(t,e,i){t.setFloat32(e,i,!0)}};n[e]=o,r+=o.bytesPerElement*o.dimension}this.definitions=n,this.stride=r}addAttributes(t){const e=this.clone();for(const e of Object.keys(t)){const i=this.attributesDefinition[e],r=t[e];if(i&&i!==r)throw Error(`It is not allowed to change the type of attribute "${e}" from "${i}" to "${r}"! Prefer removing the attribute first.`)}this.initialize({...this.attributesDefinition,...t},this.options);const i=this;i.count=e.count;for(const t of e.attributesNames){const{get:r}=e.getAttribAccessor(t),{set:s}=i.getAttribAccessor(t);for(let i=0;i<e.count;i++){const e=this.getDef(t);for(let t=0;t<e.dimension;t++)s(r(i,t),i,t)}}}clone(){const t=new V(this.attributesDefinition,this.options);t.count=this.count;const e=new DataView(this._data),i=new DataView(t._data);for(let t=0;t<e.byteLength;t++)i.setUint8(t,e.getUint8(t));return t}get data(){return this._data}get count(){return this._count}set count(t){this._count!==t&&(this._count=t,this._data=X(this._data,t*this.stride))}get attributesNames(){return Object.keys(this.attributesDefinition)}getAttribAccessor(t){const e=this.getDef(t),i=new DataView(this.data),r=this.stride;return{get(t,s=0){const n=e.byteOffset+r*t+s*e.bytesPerElement;return e.getter(i,n)},set(t,s,n=0){const o=e.byteOffset+r*s+n*e.bytesPerElement;e.setter(i,o,t)}}}set(t,e,{byteOffset:i=0,byteStride:r,first:s=0,count:n=1/0,targetFirst:o=0}={}){const{bytesPerElement:a,dimension:h,byteOffset:c}=this.getDef(t),u=e instanceof ArrayBuffer?e:e.buffer,l=a*h,d=r??l;let f=i+d*s;const m=this.stride;let g=o*m+c;this.count=Math.max(this.count,Math.min(n,Math.floor((u.byteLength-f)/d)));const p=u.byteLength-d+1,y=this._data.byteLength+c-m+1,b=new Uint8Array(u),x=new Uint8Array(this._data);let w=0;for(;w<n&&f<p&&g<y;)x.set(b.subarray(f,f+l),g),w++,f+=d,g+=m}getDef(t){const e=this.definitions[t];if(!e)throw Error(`[TgdDataset] Attribute "${String(t)}" not found in this DataSet!\nAvailable names are: ${Object.keys(this.definitions).map((t=>JSON.stringify(t))).join(", ")}.`);return e}defineAttributes(t,e){let i=0;const{definitions:r}=this;for(const s of Object.keys(r)){const n=r[s];if(e.hasAttribute(s)){const r=e.getAttribLocation(s);t.enableVertexAttribArray(r),t.vertexAttribPointer(r,n.dimension,t.FLOAT,!1,this.stride,i),t.vertexAttribDivisor(r,n.divisor)}i+=n.dimension*n.bytesPerElement}}toCode({indent:t=""}={}){const e=[];let i=0;const{definitions:r}=this;for(const t of Object.keys(r)){const s=r[t],n=`$${t}`;e.push(`const ${n} = gl.getAttribLocation(prg, "${t}")`,`gl.enableVertexAttribArray(${n})`,"gl.vertexAttribPointer(",`  ${n},`,`  ${s.dimension},  // Dimension`,"  gl.FLOAT,","  false,",`  ${this.stride},   // Stride`,`  ${i}   // Offset`,")",`gl.vertexAttribDivisor(${n}, ${s.divisor})`),i+=s.dimension*s.bytesPerElement}return e.map((e=>`${t}${e}`)).join("\n")}}const j={float:1,vec2:2,vec3:3,vec4:4},X="function"==typeof ArrayBuffer.prototype.transfer?function(t,e){return t.transfer(e)}:function(t,e){const i=new ArrayBuffer(e??t.byteLength);return new Uint8Array(i).set(new Uint8Array(t)),i};class O extends ${context;texture;program;vao;zoom=1;x=0;y=0;z=1;constructor(t,e,{x:i=0,y:r=0,z:s=.999999,zoom:n=1,scaleX:o=1,scaleY:a=1}={}){super(),this.context=t,this.x=i,this.y=r,this.z=s,this.zoom=n,this.texture=e,this.program=t.programs.create({vert:"#version 300 es\n\nuniform float uniZoom;\nuniform vec2 uniScale;\nuniform vec2 uniScroll;\nuniform float uniZ;\nin vec2 attPoint;\nin vec2 attUV;\nout vec2 varUV;\n\nvoid main() {\n    varUV = (attUV + uniScroll) * uniZoom;\n    float x = uniScale.x * attPoint.x;\n    float y = uniScale.y * attPoint.y;\n    gl_Position = vec4(x, y, uniZ, 1.0);\n}",frag:"#version 300 es\n\nprecision mediump float;\n\nuniform sampler2D uniTexture;\nin vec2 varUV;\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = texture(uniTexture, varUV);\n}"});const h=new V({attPoint:"vec2",attUV:"vec2"});h.set("attPoint",new Float32Array([-1*o,1*a,1*o,1*a,-1*o,-1*a,1*o,-1*a])),h.set("attUV",new Float32Array([0,0,1,0,0,1,1,1])),this.vao=t.createVAO(this.program,[h])}delete(){const{vao:t}=this;t.delete()}paint(){const{gl:t}=this.context,{vao:e,program:i,texture:r,zoom:s,x:n,y:o,z:a}=this;i.use();const{width:h,height:c}=this.context,u=r.width*c>r.height*h,l=u?r.width*c/(h*r.height):1,d=u?1:r.height*h/(c*r.width);i.uniform2f("uniScale",l,d),i.uniform2f("uniScroll",n,o),i.uniform1f("uniZoom",1/s),i.uniform1f("uniZ",a),r.activate(i,"uniTexture"),t.disable(t.CULL_FACE),e.bind(),t.drawArrays(t.TRIANGLE_STRIP,0,4)}}class W extends ${context;options;clearMask;red=1;green=.7;blue=0;alpha=1;depth=1;constructor(t,e={}){super(),this.context=t,this.options=e;const{gl:i}=t,r=e.color??[0,0,0,1],s=e.depth??1;this.clearMask=0;let n=!1;if(e.color&&(this.clearMask|=i.COLOR_BUFFER_BIT,n=!0),"number"==typeof e.depth&&(this.clearMask|=i.DEPTH_BUFFER_BIT,n=!0),!n)throw Error("[TgdPainterClear] You must give at least a color or a depth in the constructor!");[this.red,this.green,this.blue,this.alpha]=r,this.depth=s}delete(){}paint(){const{clearMask:t,context:e,red:i,green:r,blue:s,alpha:n,depth:o,options:a}=this,{gl:h}=e;a.color&&h.clearColor(i,r,s,n),"number"==typeof a.depth&&h.clearDepth(o),h.clear(t)}}class Y extends ${context;enabled;func;mask;rangeMin;rangeMax;constructor(t,{enabled:e=!0,func:i="LESS",mask:r=!0,rangeMin:s=0,rangeMax:n=1}={}){super(),this.context=t,this.enabled=e,this.func=i,this.mask=r,this.rangeMin=s,this.rangeMax=n}delete(){}paint(){const{gl:t}=this.context,{enabled:e}=this;if(!e)return void t.disable(t.DEPTH_TEST);const{func:i,mask:r,rangeMin:s,rangeMax:n}=this;t.enable(t.DEPTH_TEST),t.depthFunc(t[i]),t.depthMask(r),t.depthRange(s,n)}update(){}}function G(t,e=""){if("string"==typeof t)return`${e}${t}`;if(!t)return"";const i=`${e}    `;return t.filter((t=>null!==t)).filter((t=>!Array.isArray(t)||t.length>0)).map((t=>G(t,i))).join("\n")}function Z(t,e,i="----------------------------------------"){const r=Object.keys(t);return 0===r.length?[]:[`// ${i}`,...r.map((i=>`${e} ${t[i]} ${i};`))]}function H(t,e="Util functions"){const i=Object.keys(t);if(0===i.length)return[];const r=[`// ${e}`];return i.forEach((e=>{r.push(`${e} {`,t[e],"}","")})),r}class K{precision="mediump";uniforms;attributes;varying;functions;mainCode;constructor({precision:t="mediump",uniforms:e={},attributes:i={},varying:r={},functions:s={},mainCode:n=[]}={}){this.precision=t,this.uniforms=e,this.attributes=i,this.varying=r,this.functions=s,this.mainCode=n}get code(){return G(["#version 300 es",`precision ${this.precision} float;`,...Z(this.uniforms,"uniform"),...Z(this.attributes,"in"),...Z(this.varying,"out"),...H(this.functions),"","void main() {",this.mainCode,"}"])}}class q{precision="mediump";uniforms;varying;outputs;functions;mainCode;constructor({precision:t="mediump",uniforms:e={},outputs:i={FragColor:"vec4"},varying:r={},functions:s={},mainCode:n=["FragColor = vec4(1, 0.667, 0, 1);"]}={}){this.precision=t,this.uniforms=e,this.outputs=i,this.varying=r,this.functions=s,this.mainCode=n}get code(){return G(["#version 300 es",`precision ${this.precision} float;`,...Z(this.uniforms,"uniform"),...Z(this.varying,"in"),...Z(this.outputs,"out"),...H(this.functions),"","void main() {",this.mainCode,"}"])}}new h(.8,.8,.8,1),new h(.6,1,.9,1),new h(.9,.7,.3,1);class J extends B{blend=!1;constructor(t,e={}){const{children:i=[]}=e,{gl:r}=t,s=function(t,e){return"string"==typeof e?Q[e]:e?{equationAlpha:t[e.equationAlpha],equationColor:t[e.equationColor],functionAlphaDst:t[e.functionAlphaDst],functionAlphaSrc:t[e.functionAlphaSrc],functionColorDst:t[e.functionColorDst],functionColorSrc:t[e.functionColorSrc]}:e}(r,e.blend),n=[],o=[];void 0!==s&&(n.push((()=>{this.blend=function(t){return!!t.getParameter(t.BLEND)&&{equationAlpha:t.getParameter(t.BLEND_EQUATION_ALPHA),equationColor:t.getParameter(t.BLEND_EQUATION_RGB),functionAlphaDst:t.getParameter(t.BLEND_DST_ALPHA),functionAlphaSrc:t.getParameter(t.BLEND_SRC_ALPHA),functionColorDst:t.getParameter(t.BLEND_DST_RGB),functionColorSrc:t.getParameter(t.BLEND_SRC_ALPHA)}}(r),tt(r,s)})),o.push((()=>{tt(r,this.blend)}))),super(i,{onEnter(t,e){n.forEach((t=>t()))},onExit(t,e){o.forEach((t=>t()))}})}}const Q={sprite:{equationColor:WebGL2RenderingContext.FUNC_ADD,equationAlpha:WebGL2RenderingContext.FUNC_ADD,functionColorSrc:WebGL2RenderingContext.SRC_ALPHA,functionColorDst:WebGL2RenderingContext.ONE_MINUS_SRC_ALPHA,functionAlphaSrc:WebGL2RenderingContext.ONE,functionAlphaDst:WebGL2RenderingContext.ZERO}};function tt(t,e){!1===e?t.disable(t.BLEND):(t.enable(t.BLEND),t.blendEquationSeparate(e.equationColor,e.equationAlpha),t.blendFuncSeparate(e.functionColorSrc,e.functionColorDst,e.functionAlphaSrc,e.functionAlphaDst))}function et(t){return!!t&&!Array.isArray(t)&&"object"==typeof t}function it(t,e,i="data"){if("unknown"===e)return;if("null"===e){if(null!==t)throw Error(`Expected ${i} to be null and not a ${typeof t}!`);return}if("string"==typeof e){if(typeof t!==e)throw Error(`Expected ${i} to be a ${e} and not a ${typeof t}!`);return}if(Array.isArray(e)){const[r]=e;switch(r){case"array":return void function(t,e,i){if(!Array.isArray(t))throw Error(`Expected ${e} to be an array and not a ${typeof t}!`);const[,r]=i;for(let i=0;i<t.length;i+=1)it(t[i],r,`${e}[${i}]`)}(t,i,e);case"map":return void function(t,e,i){if(!et(t))throw Error(`Expected ${e} to be an object and not a ${typeof t}!`);const[,r]=i;for(const i of Object.keys(t))"string"==typeof i&&it(t[i],r,`${e}[${i}]`)}(t,i,e);case"?":return void function(t,e,i){if(void 0===t)return;const[,r]=i;it(t,r,e)}(t,i,e);case"|":return void function(t,e,i){const[,...r]=i;let s=Error(`No type has been defined for this alternative: ${JSON.stringify(i)}!`);for(const i of r)try{return void it(t,i,e)}catch(t){t instanceof Error&&(s=t)}throw s}(t,i,e);case"tuple":return void function(t,e,[,...i]){if(function(t,e="data"){if(!Array.isArray(t))throw Error(`${e} was expected to be an Array but we got ${typeof t}!`)}(t),i.length!==t.length)throw Error(`Expected ${e} to have ${i.length} elements, not ${t.length}!`);for(let r=0;r<i.length;r++){const s=i[r];it(t[r],s,`${e}[$i]`)}}(t,i,e);case"partial":return void function(t,e,[,i]){!function(t,e="data"){if(!et(t))throw Error(`${e} was expected to be an object but we got ${typeof t}!`)}(t,e);for(const r of Object.keys(i)){if("string"!=typeof r)continue;const s=t[r];void 0!==s&&it(s,i[r],`${e}.${r}`)}}(t,i,e);case"literal":return void function(t,e,i){const[,...r]=i;for(const e of r)if(t===e)return;throw Error(`Expected ${e} to be a literal (${r.map((t=>`"${t}"`)).join(" | ")})!`)}(t,i,e);default:if(r.startsWith("array("))return void function(t,e,i,r){if(!Array.isArray(t))throw Error(`Expected ${e} to be an array and not a ${typeof t}!`);if(t.length!==r)throw Error(`${e} was expected to have a length of ${r}, but we got ${t.length}!`);const[,s]=i;for(let i=0;i<t.length;i+=1)it(t[i],s,`${e}[${i}]`)}(t,i,e,parseInt(r.substring(6,r.length-1),10));throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(e)}`)}}if("object"!=typeof t)throw Error(`Expected ${i} to be an object and not a ${typeof t}!`);const r=t;for(const t of Object.keys(e))"string"==typeof t&&it(r[t],e[t],`${i}.${t}`)}function rt(t){it(t,["partial",{accessors:["array",{bufferView:["?","number"],byteOffset:["?","number"],componentType:"number",normalized:["?","boolean"],count:"number",type:"string",name:["?","string"]}],meshes:["array",{name:"string",primitives:["array",{attributes:["map","number"],indices:["?","number"],mode:["?","number"],material:["?","number"]}]}],images:["array",["partial",{bufferView:"number",mimeType:"string",name:"string",uri:"string"}]],bufferViews:["array",{buffer:"number",byteLength:"number",byteOffset:["?","number"],byteStride:["?","number"],target:["?","number"]}],materials:["array",nt],samplers:["array",["partial",{minFilter:"number",magFilter:"number",wrapS:"number",wrapT:"number",name:"string"}]],textures:["array",["partial",{sampler:"number",source:"number",name:"string"}]]}])}new o(1,0,0),new o(0,1,0),new o(0,0,1),new o(-1,0,0),new o(0,-1,0),new o(0,0,-1),new f(1,0);const st={index:"number",texCoord:["?","number"]},nt=["partial",{name:"string",pbrMetallicRoughness:["partial",{baseColorFactor:["array(4)","number"],baseColorTexture:st,metallicFactor:"number",roughnessFactor:"number",metalicRoughnessTexture:st}],normalTexture:{...st,scale:["?","number"]},occlusionTexture:{...st,strength:["?","number"]},emissiveTexture:st,alphaMode:["literal","OPAQUE","MASK","BLEND"],alphaCutoff:"number",doubleSided:"boolean"}];class ot{gltf;chunks;cacheImages=new Map;cacheImageURLs=new Map;cacheBufferViewDatas=new Map;constructor(t){try{const e=function(t){const e=new DataView(t);if(1179937895!==e.getUint32(0,!0))throw Error("Invalid magic number for GLB file!");const i=e.getUint32(4,!0);if(2!==i)throw Error(`We support only version 2, but this file is in version ${i}!`);const r=e.getUint32(8,!0);let s={};const n=[];let o=12;for(;o<r;){const i=e.getUint32(o,!0);o+=4;const r=e.getUint32(o,!0);o+=4;const a=t.slice(o,o+i);if(o+=i,1313821514===r){const t=(new TextDecoder).decode(a);try{const e=JSON.parse(t);console.log(e),rt(e),s=e}catch(e){throw console.error("Unable to parse this JSON file:",t),console.error(e),Error("Invalid JSON data in the chunk!")}}else{if(5130562!==r)throw Error(`We got an invalid chunk type: 0x${r.toString(16).padStart(8,"0")}!`);n.push(a)}}return{gltf:s,chunks:n}}(t);this.gltf=e.gltf,this.chunks=e.chunks}catch(t){const e=t instanceof Error?t.message:JSON.stringify(t);throw Error(`[TgdParserGLTransfertFormatBinary] ${e}`)}}getScenes(){return this.gltf.scenes??[]}getScene(t){const e=this.gltf.scenes?.[t];if(!e)throw Error(`Asset has no scene with index #${t}!`);return e}getNode(t){const e=this.gltf.nodes?.[t];if(!e)throw Error(`Asset has no node with index #${t}!`);return e}getAccessor(t=0){const e=this.gltf.accessors?.[t];if(!e)throw Error(`Asset has no accessor with index #${t}!`);return e}getMaterial(t){const e=this.gltf.materials?.[t];if(!e)throw Error(`Asset has no material with index #${t}!`);return e}getMesh(t=0){const e=this.gltf.meshes?.[t];if(!e)throw Error(`Asset has no mesh with index #${t}!`);return e}getMeshPrimitive(t=0,e=0){const i=this.getMesh(t).primitives[e];if(!i)throw Error(`Asset has no primitive #${e} in mesh #${t}!`);return i}getMeshPrimitiveIndices(t=0,e=0){const i=this.getMeshPrimitive(t,e),r=this.getAccessor(i.indices??0),s=this.getBufferViewData(r.bufferView??0);return{type:r.componentType,buff:s,elemCount:r.count}}getTexture2DOptions(t){const e=this.gltf.textures?.[t];if(!e)throw Error(`Asset has no texture with index #${t}!`);const i=e.source??e.extensions?.EXT_texture_webp?.source??0;return{image:this.getImageURL(i)}}async loadImage(t){const e=this.cacheImages.get(t);if(e)return e;const i=this.getImageURL(t);if(!i)return;const r=new Promise(((e,r)=>{const s=new Image;s.src=i,s.onload=()=>{e(s)},s.onerror=()=>{console.error(`Unable to load image #${t}!`,this.gltf.images?.[t]),r()}}));return this.cacheImages.set(t,r),r}getImageURL(t){const e=this.cacheImageURLs.get(t);if(e)return e;const{gltf:i}=this,r=i.images?.[t];if(!r)return;if(r.uri)return r.uri;if("number"!=typeof r.bufferView)return;const s=this.getBufferViewData(r.bufferView);if(!s)return;const n=new Blob([s],{type:r.mimeType}),o=URL.createObjectURL(n);return this.cacheImageURLs.set(t,o),o}getBufferViewData(t){const e=this.cacheBufferViewDatas.get(t);if(e)return e;const{gltf:i}=this,r=i.accessors?.[t];if(!r)throw Error(`No accessor with index #${t}!`);const s=r.bufferView??t,n=i.bufferViews?.[s];if(!n)throw Error(`No bufferView with index #${s}!`);const o=this.chunks[n.buffer],a=n.byteOffset??0,h=function(t,e){switch(e){case 5120:return new Int8Array(t);case 5121:return new Uint8Array(t);case 5122:return new Int16Array(t);case 5123:return new Uint16Array(t);case 5125:return new Uint32Array(t);default:return new Float32Array(t)}}(o.slice(a,a+n.byteLength),r.componentType);return this.cacheBufferViewDatas.set(t,h),h}setAttrib(t,e,i=0,r=0,s){const{gltf:n}=this,o=n.meshes?.[i].primitives[r].attributes[s??e]??-1,a=n.accessors?.[o];if(!a)throw Error(`No attribute "${s??e}" for primitive #${r} of mesh #${i}!`);const h=a.bufferView??0,c=n.bufferViews?.[h];if(!c)throw Error(`No bufferView with index #${h}!`);const u=this.getBufferViewData(h);t.set(e,u,{byteStride:c.byteStride,byteOffset:a.byteOffset,count:a.count})}}},1959:(t,e,i)=>{t.exports=i.p+"fnt/fuzzy-bubbles-0.ad816057d280e4316eb3.woff2"},7566:(t,e,i)=>{t.exports=i.p+"fnt/fuzzy-bubbles-1.3a3daeb224eb3200fa85.woff2"},2369:(t,e,i)=>{t.exports=i.p+"fnt/fuzzy-bubbles-2.4431ad634415632bf6d5.woff2"},7544:(t,e,i)=>{t.exports=i.p+"fnt/fuzzy-bubbles-3.5c299be2b666058c9d03.woff2"},9475:(t,e,i)=>{t.exports=i.p+"fnt/fuzzy-bubbles-4.c4493edf862c67c0496f.woff2"},7050:(t,e,i)=>{t.exports=i.p+"fnt/fuzzy-bubbles-5.7f81e7206ef32cbbcd17.woff2"}},s={};function n(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={id:t,exports:{}};return r[t].call(i.exports,i,i.exports,n),i.exports}n.m=r,t=[],n.O=(e,i,r,s)=>{if(!i){var o=1/0;for(u=0;u<t.length;u++){for(var[i,r,s]=t[u],a=!0,h=0;h<i.length;h++)(!1&s||o>=s)&&Object.keys(n.O).every((t=>n.O[t](i[h])))?i.splice(h--,1):(a=!1,s<o&&(o=s));if(a){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[i,r,s]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,i)=>(n.f[i](t,e),e)),[])),n.u=t=>"scr/"+t+"."+{582:"4465c7a247e2f551430d",588:"36462fa2ce633bb2e609"}[t]+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),e={},i="puzzle-cross-the-bridge:",n.l=(t,r,s,o)=>{if(e[t])e[t].push(r);else{var a,h;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==i+s){a=l;break}}a||(h=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",i+s),a.src=t),e[t]=[r];var d=(i,r)=>{a.onerror=a.onload=null,clearTimeout(f);var s=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((t=>t(r))),i)return i(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),h&&document.head.appendChild(a)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t+"../"})(),(()=>{n.b=document.baseURI||self.location.href;var t={524:0};n.f.j=(e,i)=>{var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((i,s)=>r=t[e]=[i,s]));i.push(r[2]=s);var o=n.p+n.u(e),a=new Error;n.l(o,(i=>{if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+e,e)}},n.O.j=e=>0===t[e];var e=(e,i)=>{var r,s,[o,a,h]=i,c=0;if(o.some((e=>0!==t[e]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(h)var u=h(n)}for(e&&e(i);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},i=self.webpackChunkpuzzle_cross_the_bridge=self.webpackChunkpuzzle_cross_the_bridge||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),n.nc=void 0;var o=n.O(void 0,[48],(()=>n(7994)));o=n.O(o)})();